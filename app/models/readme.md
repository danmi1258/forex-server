АПИ и роутинг
=============
Параметр для любого запроса:
?token

_/fx/orders - получить все ордеры
 параметры:
  * ?q - дополнительные условия выборки
  opened
  self
  closed


_/fx/orders/open

_/fx/orders/id/close

_/fx/orders/check

_/fx/orders/id/confirm



Принцип работы терминала-провайдера (ТП)
========================================

ТП авторизуется через токен и получает признак: провайдер.

ТП производит запросы на адреса ( /fx/orders/open;  /fx/orders/id/close). Другие роуты блокируют действия
этого типа ТП.

При обращении на /fx/orders/open - ТП сообщает параметры новой открытой сделки. При этом сервер записывает
параметры сделки в коллекцию Order

При обращении на /fx/orders/id/close - ТП указывает некоторый ид ордера. Сервер ищет данный оредер в списчке
зарегистрированных ордеров и закрывает его, проставляя время закрытия.


Принцип работы терминала-исполнителя (ТИ)
=========================================

Терминал исполнитель непрерывно опрашивает сервер по адресу _/fx/orders/check.

Контроллер данного роута проверяет открытые ордера, зарегистрированные ТП, на которые подписан данный ТИ,
но при этом не подтвержденные ранее текущим ТИ.
 * ТИ хранит подписки в поле subscriptions
 * ТИ хранит открытые ордера, по этому может определить какие сделки из текущих открытых он уже брал.

Если таковые присутствуют, то сервер отдает их по одной. (т.е. на каждый запрос один ордер, если их было несколько).

Если ТИ получил параметры новой сделки, он пытается открыть эту сделку, после чего сообщает серверу об успехе на
адрес: _/fx/orders/id/confirm_.  При этом в теле запроса сообщает данные открытой сделки (время и магическое число).

Если ТИ подтверждает закрытие сделки, он сообщает параметры сделки. Закрытие, профит и т.п.


Принцип работы администратора
=============================

В программу также можно попасть через токен типа user

Админ может просматривать статистику сделок, но при этом ему блокируются роуты предназначенные для терминалов.

Админ также может приостановить копирование сделок:

* отдельного терминала
* отдельного провайдера
* всех терминалов
* всех провайдеров

Админ может изменять объемы ТИ на конкретные подписки.

Админ может послать глобальный сигнал о немедленной продаже сделок, как для отдельного ТИ, так и для
всех ТИ.



